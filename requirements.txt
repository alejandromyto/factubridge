# Política de versionado:
# - Librerías críticas de seguridad/AEAT (cryptography, signxml, lxml, xmlschema,
#  asyncpg, qrcode) se fijan con ==
#  para garantizar compatibilidad exacta y cumplimiento normativo.
# - Frameworks y librerías core (FastAPI, SQLAlchemy, Pydantic, Celery, HTTPX, Alembic,
#  Zeep, Sentry) usan rangos >=X,<major+1 siguiendo SemVer, permitiendo actualizaciones
#  menores y parches sin romper compatibilidad.
# - Herramientas de desarrollo, testing y linting (pytest, black, flake8, mypy, etc.)
#  usan >=X para flexibilidad en entorno dev.
# - Desarrollo:
# * requirements.txt: dependencias producción/core con rangos semánticos (>=X,<major+1)
#  y == solo en librerías críticas.
# * dev-requirements.txt: contiene únicamente herramientas de desarrollo (testing,
#  linting, etc.).
# * IMPORTANTE: Tras generar requirements.lock (./gen-lockfile.sh): reconstruir
#  con Dev Containers: Rebuild Container para entorno de desarrollo con los requirements
#  que se usarán en prod (requirements.lock) + los de dev (dev-requirements.txt).
# - Producción:
# * requirements.lock: generado desde requirements.txt mediante ./gen-lockfile.sh
#  en entorno limpio. Es la única fuente de verdad.
# - Flujo:
# 1. Actualizar requirements.txt solo cuando sea necesario y tras validación.
# 2. Generar requirements.lock con ./gen-lockfile.sh:
# * NOTA: Desplegar en producción solamente requirements.lock (nunca requirements.txt
#  directamente).

# FastAPI y servidor
fastapi>=0.121.2,<1.0
uvicorn[standard]>=0.38.0
python-multipart>=0.0.20

# Base de datos
sqlalchemy>=2.0.44,<3.0
asyncpg==0.30.0
alembic>=1.17.2,<2.0
psycopg2-binary>=2.9.11,<3.0

# Redis y workers
redis>=7.0.1
celery>=5.5.3,<6.0

# SOAP client para AEAT
zeep>=4.3.2,<5.0
lxml==6.0.2

# Firma electrónica y seguridad
cryptography==46.0.3
signxml==4.2.0

# QR
qrcode[pil]==8.2

# Rate limiting
slowapi>=0.1.9,<1.0

# Configuración
pydantic>=2.12.4,<3.0
pydantic-settings>=2.12.0,<3.0
python-dotenv>=1.2.1,<2.0

# HTTP client para webhooks
httpx>=0.28.1,<1.0

# Validación y manipulación de fechas
python-dateutil>=2.9.0.post0

# Validación XSD/AEAT
xmlschema==4.2.0
xsdata[cli]>=26.1,<27.0

# Templates
jinja2>=3.1.6

# Monitorización
sentry-sdk[fastapi]>=2.44.0,<3.0

# Logger
python-json-logger==4.0.0
